# 动画以及多谋体

## 使用图形上下文按一定比例缩放图片
~~~objective-c
//
//  ViewController.m
//  imageTest
//
//  Created by cr on 2024/11/21.
//

#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

- (void)viewDidLoad {
    [super viewDidLoad];
    
    // 如何通过图形上下文，来实现缩放图片的功能
    
    UIImage* image = [UIImage imageNamed:@"1"];
    UIImage* scaledImage = [self scaleImage:image newSize:CGSizeMake(180, 180)];
    
    UIImageView* imageView = [[UIImageView alloc] initWithImage:scaledImage];
    imageView.center = CGPointMake(160, 160);
    [self.view addSubview:imageView];
}

// 创建一个方法，传递一个图像参数，和一个缩放比例参数，实现将图像，缩放至指定比例的功能
- (UIImage*)scaleImage:(UIImage* )image newSize:(CGSize)newSize{
    
    CGSize imageSize = image.size;
    int width = imageSize.width;
    int height = imageSize.height;
    
    // 计算图像新尺寸与旧尺寸的宽高比例
    float widthFactor = newSize.width/width;
    float heightFactor = newSize.height/height;
    float scaleFactor = (widthFactor < heightFactor) ? widthFactor : heightFactor;
    
    // 计算图像新的宽度和高度
    float scaleWidth = width * scaleFactor;
    float scaleHeight = height * scaleFactor;
    
    // 将新的宽度和高度，构建成标准的尺寸对象
    CGSize targetSize = CGSizeMake(scaleWidth, scaleHeight);
    
    // 创建绘图上下文环境
    UIGraphicsBeginImageContext(targetSize);
    
    // 将图像对象，画入之前计算的新尺寸里，原点为0，0
    [image drawInRect:CGRectMake(0, 0, scaleWidth, scaleHeight)];
    
    // 获取上下文里的内容，将内容写入到新的图像对象
    UIImage* newImage = UIGraphicsGetImageFromCurrentImageContext();
    
    return newImage;
}

@end

~~~
### 效果
